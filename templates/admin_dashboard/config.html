{% extends 'admin_dashboard/base.html' %}
{% load static %}
{% block title %}Configuration{% endblock %}

{% block content %}

<div class="wrapper">
  <div class="main">
    <nav class="navbar navbar-expand px-3 border-bottom">
      <div class="navbar-collapse navbar">
        <h4>Configuration</h4>
      </div>
    </nav>

    <main class="content px-3 py-2">
      <ul class="nav nav-tabs" id="scheduleTabs" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="regular-tab" data-bs-toggle="tab" data-bs-target="#regular" type="button" role="tab" aria-controls="regular" aria-selected="true">Instructors</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="irregular-tab" data-bs-toggle="tab" data-bs-target="#irregular" type="button" role="tab" aria-controls="irregular" aria-selected="false">Subjects</button>
        </li>
      </ul>
      <div class="tab-content mt-3" id="scheduleTabsContent">
        <div class="tab-pane fade show active" id="regular" role="tabpanel" aria-labelledby="regular-tab">
          <div class="modal-header mb-3">
            <h4>Instructors</h4>
            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#instructorModal">Add Instructor</button>
          </div>
          <div class="table-responsive">
            <table class="table table-striped table-bordered">
              <thead>
                <tr>
                  <th>id</th>
                  <th>Name</th>
                  <th>Gender</th>
                  <th>Email</th>
                  <th>Contact No.</th>
                  <th>Address</th>
                </tr>
              </thead>
              <tbody id="instructorTable">
                {% for instructor in instructors %}
                <tr>
                  <td>{{ instructor.id }}</td>
                  <td>{{ instructor.name }}</td>
                  <td>{{ instructor.gender }}</td>
                  <td>{{ instructor.email }}</td>
                  <td>{{ instructor.contact }}</td>
                  <td>{{ instructor.address }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>

        <div class="tab-pane fade" id="irregular" role="tabpanel" aria-labelledby="irregular-tab">
          <div class="modal-header mb-3">
            <h4>Subjects</h4>
            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#subjectModal">Add Subject</button>
          </div>
          <div class="table-responsive">
            <table class="table table-striped table-bordered">
              <thead>
                <tr>
                  <th>Course Code</th>
                  <th>Course Title</th>
                  <th>Year</th>
                  <th>Semester</th>
                  <th>Lecture Units</th>
                  <th>Laboratory Units</th>
                  <th>Prerequisite</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="subjectTable">
                {% for subject in subjects %}
                <tr>
                  <td>{{ subject.course_code }}</td>
                  <td>{{ subject.course_title }}</td>
                  <td>{{ subject.get_year_display }}</td>
                  <td>{{ subject.get_semester_display }}</td>
                  <td>{{ subject.subject_units_lec }}</td>
                  <td>{{ subject.subject_units_lab }}</td>
                  <td>{{ subject.prerequisite.course_code }}</td>
                  <td>
                    <div class="btn-group">
                      <button class="btn btn-primary btn-sm edit-btn" data-id="{{ subject.id }}"data-code="{{ subject.course_code }}"
                      data-title="{{ subject.course_title }}"
                      data-year="{{ subject.year }}"
                      data-semester="{{ subject.semester }}"
                      data-lec-units="{{ subject.subject_units_lec }}"
                      data-lab-units="{{ subject.subject_units_lab }}"
                      data-prerequisite="{{ subject.prerequisite.id }}">Edit</button>
                      <button class="btn btn-danger btn-sm delete-btn" data-id="{{ subject.id }}">Delete</button>
                    </div>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
{% endblock %}

{% block modal %}
    {% include 'admin_dashboard/instructor_modal.html' %}
    {% include 'admin_dashboard/subject_modal.html' %}
{% endblock %}

{% block script %}
<script src="{% static 'js/subject.js' %}"></script>
{% endblock %}